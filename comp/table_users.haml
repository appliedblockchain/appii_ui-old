%table-users
  %p Search
  %input{name: "query", onkeyup: "{ filterUsers }", placeholder: "enter a skill or a location", type: "text"}
    %table
      %thead
        %tr
          %th
          %th Name
          %th Job title
      %tr{ each: "{users}" }
        %td
          %a{href: "#/users/{ id }"}
            %img.avatar{src: "{ avatar }"}/
        %td
          %a{href: "#/users/{ id }"}
            { name }
        %td { jobTitle() }

  :javascript
    var matchString = (user) => {
      return s(`${user.name}|${user.jobTitle()}`).toLowerCase()
    }
    filterUsers() {
      this.users = _(StoreData.users).select((user) => {
        return matchString(user).include(this.query.value.toLowerCase())
      })
    }

    BR.prepare( opts, this, () => {
      this.users = StoreData.users
    })
